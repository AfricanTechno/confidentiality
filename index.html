<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>AT Confidentiality -- Starter Pack</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React 18 UMD + Babel Standalone for in-browser JSX -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    :root { --sat: env(safe-area-inset-top); --sab: env(safe-area-inset-bottom); }
    @supports(padding:max(0px)){
      .safe-top{ padding-top: max(0px, var(--sat)); }
      .safe-bottom{ padding-bottom: max(0px, var(--sab)); }
    }
    .scrollx{-webkit-overflow-scrolling:touch;}
    .overflow-hint{ box-shadow: inset -10px 0 8px -8px rgba(0,0,0,0.08); }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useState } = React;

    // ---- AT Confidentiality Microsite -- mobile-first (iPhone 13 mini+) ----
    function ATConfidentialitySite() {
      const getTabFromHash = () => {
        const h = (typeof window !== "undefined" ? (window.location.hash || "").replace("#","") : "");
        const allowed = new Set(["rule","green","amber","red","where","situations","lines","matrix"]);
        return allowed.has(h) ? h : "rule";
      };
      const [active, setActive] = useState(getTabFromHash());
      useEffect(() => {
        const onHash = () => setActive(getTabFromHash());
        window.addEventListener("hashchange", onHash);
        return () => window.removeEventListener("hashchange", onHash);
      }, []);
      const setActiveTab = (tab) => { if (typeof window !== "undefined") window.location.hash = tab; };

      const [query, setQuery] = useState("");
      const [roleView, setRoleView] = useState("overview");
      const [showEARN, setShowEARN] = useState(false);

      const roles = [
        { key: "daliso", name: "Daliso", title: "Managing Director" },
        { key: "boitumelo", name: "Boitumelo", title: "Acting Chief of Staff" },
        { key: "tsholi", name: "Tsholi", title: "Bookkeeper" },
        { key: "traverse", name: "Traverse", title: "Internal Sales" },
        { key: "ayooluwa", name: "Ayooluwa", title: "Online Store Manager" },
        { key: "iridium", name: "Iridium", title: "External Accountants" },
        { key: "joshua", name: "Joshua", title: "Chief Enabler (EARN)" },
      ];

      const topics = [
        { id:"rule", title:"90-Second Rule", level:"green", bullets:[
          "Does it include costs, salaries, PII, or legal/security? If yes → Keep private.",
          "Is it published already? If no → Keep private.",
          "Do all listeners need it for their job now? If no → Narrow the audience.",
          "Still unsure? DM/call Daliso for a 1:1.",
        ]},
        { id:"green", title:"GREEN -- Team-safe to Share", level:"green", bullets:[
          "Published retail prices/promos on africantechno.com or 180by2.co.za.",
          "Stock ETA ranges (e.g., ‘Quest 3 straps due mid-month’).",
          "Fulfilment updates (e.g., ‘10 orders ship before 15:00 cut-off’).",
          "How-to processes (quotes/invoices, RMA steps).",
          "Aggregated metrics without names (‘orders shipped this week’).",
        ]},
        { id:"amber", title:"AMBER -- Ask First / Share Summary Only", level:"amber", bullets:[
          "Draft price changes not yet on site.",
          "Discount rules for special quotes.",
          "High-level cash-flow timing (no bank figures).",
          "Vendor progress (Iridium/Yaxxa) without documents attached.",
        ]},
        { id:"red", title:"RED -- Private (Restricted or Higher)", level:"red", bullets:[
          "Money: unit/landed costs, GP/margins, rebates, supplier price lists, credit terms, bank statements.",
          "People: salaries/benefits, performance, disciplinary/medical info.",
          "Customers: names + order details, addresses/phones, payment status, negotiated discounts.",
          "Security/IT: passwords, 2FA seeds, API keys, incident details.",
          "Strategy: unannounced partnerships, price changes, restructuring.",
          "EARN: entity P&Ls, inter-company billing, payroll, legal items.",
        ]},
        { id:"where", title:"Where to Share (Defaults)", level:"green", bullets:[
          "GREEN: post in #team-updates or relevant ops/sales channels.",
          "AMBER/RED email subject tags: [RESTRICTED] or [HIGHLY RESTRICTED].",
          "Use private Slack: #fin-restricted (finance), #exec-highres (HR/legal/strategy).",
          "Files: Xero/Cin7/Drive with role-based permissions; avoid ad-hoc attachments.",
        ]},
        { id:"situations", title:"Common Situations -- What to Do", level:"amber", bullets:[
          "Special discount for a quote: DM Traverse + loop Daliso; share only numbers needed for that quote.",
          "Invoice/statement question: DM Tsholi; summaries in team, details in #fin-restricted.",
          "Customer ticket includes address/phone: keep in ticketing tool or DM; never paste PII in public Slack.",
          "Draft price change from supplier: send to Daliso (and Boitumelo if scheduling needed); tag as [RESTRICTED].",
          "HR or performance topic: DM Boitumelo → escalate to Daliso; no group discussion.",
        ]},
        { id:"lines", title:"Ready-to-Use Lines", level:"green", bullets:[
          "Sharing a team-safe summary now; detailed costs will go to #fin-restricted.",
          "This includes PII/costs -- moving to [RESTRICTED].",
          "Not yet announced -- will confirm with Daliso before sharing.",
        ]},
      ];

      const matrix = [
        { topic:"Published RSPs & promos",
          access:{ team:true, tsholi:true, traverse:true, ayooluwa:true, boitumelo:true, iridium:false, daliso:true } },
        { topic:"Stock ETA ranges",
          access:{ team:true, tsholi:true, traverse:true, ayooluwa:true, boitumelo:true, iridium:false, daliso:true } },
        { topic:"Draft price changes",
          access:{ team:false, tsholi:"ask", traverse:"ask", ayooluwa:"ask", boitumelo:true, iridium:false, daliso:true } },
        { topic:"Unit/landed costs, GP, rebates",
          access:{ team:false, tsholi:true, traverse:"need", ayooluwa:false, boitumelo:false, iridium:true, daliso:true } },
        { topic:"Customer PII & order details",
          access:{ team:false, tsholi:true, traverse:true, ayooluwa:true, boitumelo:false, iridium:false, daliso:true } },
        { topic:"Bank/cash-flow detail",
          access:{ team:false, tsholi:true, traverse:false, ayooluwa:false, boitumelo:false, iridium:true, daliso:true } },
        { topic:"Salaries/HR",
          access:{ team:false, tsholi:false, traverse:false, ayooluwa:false, boitumelo:true, iridium:false, daliso:true } },
      ];

      const filteredTopics = useMemo(() => {
        if (!query.trim()) return topics;
        const q = query.toLowerCase();
        return topics
          .map((t) => ({ ...t, bullets: t.bullets.filter((b) => b.toLowerCase().includes(q)) }))
          .filter((t) => t.title.toLowerCase().includes(q) || t.bullets.length > 0);
      }, [query]);

      const levelBadge = (lvl) => ({
        green: "bg-green-100 text-green-800 border-green-300",
        amber: "bg-amber-100 text-amber-800 border-amber-300",
        red: "bg-red-100 text-red-800 border-red-300",
      }[lvl] || "bg-slate-100 text-slate-800 border-slate-300");

      const Tag = ({ children }) =>
        <span className="inline-block rounded-full border px-2 py-1 text-[11px] leading-4 font-medium">{children}</span>;

      const SectionCard = ({ section }) => (
        <div className="rounded-2xl border p-4 md:p-5 shadow-sm bg-white">
          <div className="mb-3 flex items-center gap-3">
            <h3 className="text-base md:text-lg font-semibold">{section.title}</h3>
            <span className={`text-[11px] md:text-xs rounded-full border px-2 py-0.5 ${levelBadge(section.level)}`}>
              {section.level.toUpperCase()}
            </span>
          </div>
          <ul className="list-disc space-y-2 pl-5 text-[13px] md:text-sm leading-relaxed">
            {section.bullets.map((b, i) => <li key={i}>{b}</li>)}
          </ul>
          {section.id === "lines" && (
            <div className="mt-4 flex flex-wrap gap-2">
              {section.bullets.map((b, i) => (
                <button key={i} onClick={() => navigator.clipboard.writeText(b)}
                        className="rounded-xl border px-3 py-2 text-xs md:text-[13px] hover:bg-slate-50 min-h-[40px]"
                        title="Copy line">
                  Copy "{b.slice(0, 28)}{b.length > 28 ? "…" : ""}"
                </button>
              ))}
            </div>
          )}
        </div>
      );

      const AccessPill = ({ val }) => {
        let label = "–", cls = "bg-slate-100 text-slate-700";
        if (val === true) { label = "✓"; cls = "bg-green-100 text-green-800"; }
        else if (val === "ask") { label = "ask"; cls = "bg-amber-100 text-amber-800"; }
        else if (val === "need") { label = "need-to-know"; cls = "bg-amber-100 text-amber-800"; }
        return <div className={`mx-auto w-fit rounded-full px-2 py-0.5 text-[11px] ${cls}`}>{label}</div>;
      };

      const headerTabs = [
        { id:"rule", label:"90-Second Rule" }, { id:"green", label:"Green" },
        { id:"amber", label:"Amber" }, { id:"red", label:"Red" },
        { id:"where", label:"Where to Share" }, { id:"situations", label:"Situations" },
        { id:"lines", label:"Lines" }, { id:"matrix", label:"Role Matrix" },
      ];

      const isActive = (id) => active === id;
      const visibleSections = useMemo(() => active === "matrix" ? [] : filteredTopics.filter(t=>t.id===active), [active, filteredTopics]);

      return (
        <div className="min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 text-slate-900">
          <header className="safe-top sticky top-0 z-10 border-b bg-white/90 backdrop-blur">
            <div className="mx-auto flex w-full max-w-6xl items-center justify-between gap-3 px-3 py-2 md:p-3">
              <div className="flex min-w-0 flex-1 items-center gap-3">
                <div className="h-8 w-8 shrink-0 rounded-xl bg-slate-900"></div>
                <div className="min-w-0">
                  <div className="truncate text-sm font-semibold">African Technopreneurs</div>
                  <div className="truncate text-[11px] text-slate-500">Confidentiality -- Starter Pack</div>
                </div>
              </div>
              <div className="hidden flex-1 items-center justify-center gap-1 md:flex" role="tablist" aria-label="Primary">
                {headerTabs.map(n => (
                  <button key={n.id} role="tab" aria-selected={isActive(n.id)} onClick={()=>setActiveTab(n.id)}
                          className={`rounded-full px-3 py-2 text-xs min-h-[40px] ${isActive(n.id) ? "bg-slate-900 text-white" : "hover:bg-slate-100"}`}>
                    {n.label}
                  </button>
                ))}
              </div>
              <div className="flex shrink-0 items-center gap-2">
                <button onClick={()=>window.print()} className="rounded-xl border px-3 py-2 text-xs md:text-sm hover:bg-slate-50 min-h-[40px]">Print / PDF</button>
              </div>
            </div>
            <div className="block border-t md:hidden">
              <div className="mx-auto max-w-6xl p-2 pt-2">
                <input value={query} onChange={(e)=>setQuery(e.target.value)} placeholder="Search (PII, pricing, RMA…)"
                       className="w-full rounded-xl border px-3 py-2 text-sm placeholder:text-slate-400 focus:outline-none focus:ring" />
              </div>
              <div className="scrollx mx-auto max-w-6xl overflow-x-auto px-2 pb-2">
                <div className="flex w-max gap-2" role="tablist" aria-label="Primary mobile">
                  {headerTabs.map(n => (
                    <button key={n.id} role="tab" aria-selected={isActive(n.id)} onClick={()=>setActiveTab(n.id)}
                            className={`rounded-full px-3 py-2 text-xs min-h-[40px] ${isActive(n.id) ? "bg-slate-900 text-white" : "hover:bg-slate-100"}`}>
                      {n.label}
                    </button>
                  ))}
                </div>
              </div>
            </div>
          </header>

          <main className="mx-auto max-w-6xl px-3 py-4 md:px-6 md:py-6">
            <div className="mb-5 flex flex-col gap-3 md:mb-6 md:flex-row md:items-center md:justify-between">
              <div className="min-w-0">
                <h1 className="text-xl md:text-2xl font-bold">AT Confidentiality -- Starter Pack for Tsholi</h1>
                <p className="text-[12px] md:text-sm text-slate-600">Effective: 3 Sep 2025 • Owner: Daliso Ngoma (MD)</p>
              </div>
              <div className="flex items-center gap-3">
                <label className="flex items-center gap-2 text-sm">
                  <input type="checkbox" checked={showEARN} onChange={(e)=>setShowEARN(e.target.checked)} />
                  <span className="text-[13px]">Include EARN-specific notes</span>
                </label>
                <div className="hidden md:flex items-center gap-1">
                  <Tag>[INTERNAL]</Tag> <Tag>[RESTRICTED]</Tag> <Tag>[HIGHLY RESTRICTED]</Tag>
                </div>
              </div>
            </div>

            {active !== "matrix" && (
              <div className="grid grid-cols-1 gap-3 md:gap-4 md:grid-cols-2">
                {visibleSections.map(section => <SectionCard key={section.id} section={section} />)}
              </div>
            )}

            {active === "matrix" && (
              <div className="rounded-2xl border bg-white p-4 md:p-5 shadow-sm">
                <div className="mb-3 flex flex-col gap-3 md:mb-4 md:flex-row md:items-center md:justify-between">
                  <h2 className="text-base md:text-lg font-semibold">Who Sees What -- Role Matrix</h2>
                  <div className="flex items-center gap-2 text-sm">
                    <span className="text-slate-600">View:</span>
                    <select value={roleView} onChange={(e)=>setRoleView(e.target.value)}
                            className="rounded-xl border px-2 py-2 text-sm min-h-[40px]">
                      <option value="overview">Overview</option>
                      {roles.map(r => <option key={r.key} value={r.key}>{`${r.name} -- ${r.title}`}</option>)}
                    </select>
                  </div>
                </div>
                <div className="overflow-x-auto overflow-hint scrollx">
                  <table className="w-full min-w-[680px] text-left text-[13px] md:text-sm">
                    <thead>
                      <tr className="border-b">
                        <th className="py-2 pr-4 font-medium text-slate-600">Topic</th>
                        {roleView === "overview" ? (
                          <>
                            <th className="px-2 py-2 text-center">Team-wide</th>
                            <th className="px-2 py-2 text-center">Tsholi</th>
                            <th className="px-2 py-2 text-center">Traverse</th>
                            <th className="px-2 py-2 text-center">Ayooluwa</th>
                            <th className="px-2 py-2 text-center">Boitumelo</th>
                            <th className="px-2 py-2 text-center">Iridium</th>
                            <th className="px-2 py-2 text-center">Daliso</th>
                          </>
                        ) : (
                          <th className="px-2 py-2 text-center">Access</th>
                        )}
                      </tr>
                    </thead>
                    <tbody>
                      {matrix.map(row => (
                        <tr key={row.topic} className="border-b last:border-0">
                          <td className="py-2 pr-4 font-medium">{row.topic}</td>
                          {roleView === "overview" ? (
                            <>
                              <td className="px-2 py-2"><AccessPill val={row.access.team} /></td>
                              <td className="px-2 py-2"><AccessPill val={row.access.tsholi} /></td>
                              <td className="px-2 py-2"><AccessPill val={row.access.traverse} /></td>
                              <td className="px-2 py-2"><AccessPill val={row.access.ayooluwa} /></td>
                              <td className="px-2 py-2"><AccessPill val={row.access.boitumelo} /></td>
                              <td className="px-2 py-2"><AccessPill val={row.access.iridium} /></td>
                              <td className="px-2 py-2"><AccessPill val={row.access.daliso} /></td>
                            </>
                          ) : (
                            <td className="px-2 py-2"><AccessPill val={row.access[roleView]} /></td>
                          )}
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
                {showEARN && (
                  <div className="mt-4 rounded-xl border bg-slate-50 p-4 text-sm">
                    <div className="mb-1 font-medium">EARN-specific notes</div>
                    <ul className="list-disc pl-5">
                      <li>Entity P&Ls, inter-company billing, payroll, and legal items are Highly Restricted by default.</li>
                      <li>Audience: Daliso and Joshua only, unless explicitly invited.</li>
                    </ul>
                  </div>
                )}
              </div>
            )}

            <div className="mt-6 grid grid-cols-1 gap-3 md:mt-8 md:grid-cols-2 md:gap-4">
              <div className="rounded-2xl border bg-white p-4 md:p-5 shadow-sm">
                <h3 className="mb-2 text-base md:text-lg font-semibold">Email Subject Tag Helper</h3>
                <p className="mb-3 text-[13px] md:text-sm text-slate-600">Use tags to set the right expectation and limit forwarding.</p>
                <div className="flex flex-wrap gap-2">
                  {[
                    "[INTERNAL] Week 36 fulfilment update",
                    "[RESTRICTED] August landed cost variance",
                    "[HIGHLY RESTRICTED] HR case -- scheduling",
                  ].map(s => (
                    <button key={s} onClick={()=>navigator.clipboard.writeText(s)}
                            className="rounded-xl border px-3 py-2 text-xs md:text-[13px] hover:bg-slate-50 min-h-[40px]">
                      Copy: {s}
                    </button>
                  ))}
                </div>
              </div>

              <div className="rounded-2xl border bg-white p-4 md:p-5 shadow-sm">
                <h3 className="mb-2 text-base md:text-lg font-semibold">Quick Links / Channels</h3>
                <ul className="list-disc pl-5 text-[13px] md:text-sm">
                  <li><span className="font-medium">Slack public:</span> #team-updates, #ops, #sales</li>
                  <li><span className="font-medium">Slack private:</span> #fin-restricted, #exec-highres</li>
                  <li><span className="font-medium">Systems of record:</span> Xero, Cin7 Core, Google Drive (role-based folders)</li>
                </ul>
              </div>
            </div>

            <footer className="safe-bottom mt-8 pb-8 md:mt-10 md:pb-10 text-center text-[11px] md:text-xs text-slate-500">
              © <span id="year"></span> African Technopreneurs • Minimal, scalable confidentiality guide for day-to-day use.
            </footer>
          </main>
        </div>
      );
    }

    function App(){ return <ATConfidentialitySite/>; }
    ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>
</body>
</html>